{% extends 'base.html' %}

{% block content %}
<div class="matching-container">
  <h1>Find Your Perfect Match</h1>
  <div id="map"></div>
  <div class="profile-details">
    <h2>Profile Details</h2>
    <!-- Display user profile details here -->
    <button id="buddy-up-btn" onclick="sendBuddyRequest()">Buddy Up</button>
    <button id="skip-btn" onclick="skipUser()">Skip</button>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWGUj5K9NHq_MSoCpJDc-4J0Ud-qHNVLY&libraries=places"></script>
<script>
  // Initialize Google Maps
  var map;
  var markers = [];

  function initMap() {
    var options = {
      center: { lat: 0, lng: 0 },
      zoom: 10
    };

    map = new google.maps.Map(document.getElementById('map'), options);
  }

  function addMarker(location) {
    var marker = new google.maps.Marker({
      position: location,
      map: map
    });

    markers.push(marker);
  }

  function removeMarkers() {
    for (var i = 0; i < markers.length; i++) {
      markers[i].setMap(null);
    }
    markers = [];
  }

  // Call the initMap function when the page is loaded
  google.maps.event.addDomListener(window, 'load', initMap);

  // Handle user selection
  function sendBuddyRequest(userId) {
  // Make an AJAX request to the server to send the buddy request
  $.ajax({
    url: '/send_buddy_request',
    method: 'POST',
    data: { user_id: userId },
    success: function(response) {
      // Handle the success response from the server
      // You can update the UI or display a success message
    },
    error: function(error) {
      // Handle the error response from the server
      // You can display an error message or handle the error case
      }
    });
  }

  function skipUser() {
    const userElement = document.getElementById('user-card');
    userElement.remove();
  }
</script>
{% endblock %}

